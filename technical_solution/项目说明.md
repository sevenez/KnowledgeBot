# 企业知识库智能问答系统 - 项目说明

*创建时间：2025年8月27日 22:47:30*

## 主要文件夹

### 📁 source/
核心代码目录，包含所有功能模块

#### 📁 source/Document_Vectorization/
**文档向量化模块** - 将企业文档转换为向量并建立索引
- 支持多种文档格式（txt、md、csv、xlsx）
- 使用BAAI/bge-m3中文向量模型
- 支持双重向量存储方案：
  - 使用Milvus Lite（嵌入式向量数据库）作为主要向量存储
  

#### 📁 source/Vector_Search/
**向量搜索模块** - 基于向量相似度的文档检索
- 加载向量索引进行相似度搜索
- 提供交互式命令行搜索界面
- 返回最相关的文档片段

#### 📁 source/Document_Preprocessing/
**文档预处理模块** - 负责文档的解析和预处理
- `document_parser.py` - 文档解析器，支持多种格式解析
- `file_scanner.py` - 文件扫描器，递归扫描目录中的文档
- `result_fetcher.py` - 结果获取器，处理解析后的文档内容

#### 📁 source/FastAPI_Processor/
**FastAPI处理模块** - 提供RESTful API接口服务
- `main.py` - 主API服务文件，包含文档处理状态跟踪功能
- 支持文档解析和向量化状态实时更新（状态码：0-未解析，1-已解析，2-已向量化）

#### 📁 source/chunks_output/
**处理结果输出目录** - 存储文档处理和向量化结果
- 包含每个文档的切片和向量数据（.json格式）
- `indices/` - 完整版向量索引目录
- `indices_lite/` - 轻量版向量索引目录
- 支持增量处理，避免重复计算

#### 📁 source/index_files/
**索引文件目录** - 存储全局向量索引和元数据
- `metadata.json` - 文档元数据信息
- `id_metadata.json` - 文档ID映射关系

### 📁 MD_result/
**Markdown文档目录** - 存放已转换为Markdown格式的企业文档

### 📁 DOCS/
**原始文档库** - 包含企业的各类原始文档
- 按部门分类：产研部、公司总部、销售部
- 支持多种格式：docx、pdf、txt、xlsx、markdown

### 📁 technical_solution/
**技术方案目录** - 存放项目的技术方案和优化建议
- `企业知识库系统技术方案.md` - 综合技术方案文档（整合版）
- `database_schema.sql` - 数据库表结构定义
- `项目说明.md` - 项目结构说明文档

## 主要Python脚本

### 🔧 根目录配置文件
- `api_config.py` - API配置文件，管理各种API密钥和端点
- `db_config.py` - 数据库配置文件，管理数据库连接参数

### 🔧 source/Document_Preprocessing/
- `document_parser.py` - 文档解析器，处理各种格式文档
- `file_scanner.py` - 文件扫描器，递归扫描文档目录
- `result_fetcher.py` - 结果获取器，提取和整理解析结果

### 🔧 source/Document_Vectorization/
- `main.py` - **主处理程序**，批量处理所有企业文档的向量化
- `main_lite.py` - **轻量版处理程序**，处理前6个文件用于快速测试
- `check_environment.py` - **环境检查工具**，验证运行环境和依赖
- `db_init.py` - 数据库初始化脚本
- `document_chunking.py` - 文档切片处理模块
- `text_vectorization.py` - 文本向量化处理模块
- `vector_indexing.py` - 向量索引构建模块
- `vector_storage.py` - **向量存储管理模块**（包含文档状态跟踪功能，实时更新数据库状态）
- `index_builder.py` - 索引构建器
- `requirements.txt` - Python依赖包列表
- `sample_document.md` - 示例文档

### 🔧 source/Vector_Search/
- `vector_search.py` - **向量搜索工具**，交互式文档搜索程序

### 🔧 source/FastAPI_Processor/
- `main.py` - **FastAPI主服务**，提供文档处理API接口和状态管理
  - 支持文档解析状态实时更新（状态码：0-未解析，1-已解析，2-已向量化）
  - 使用file_paths作为文档唯一标识符

## 快速使用

### 1. 环境检查
```bash
python source/Document_Vectorization/check_environment.py
```

### 2. 文档处理（选择其一）
```bash
# 轻量版测试
python source/Document_Vectorization/main_lite.py

# 完整版处理
python source/Document_Vectorization/main.py
```

### 3. 文档搜索
```bash
python source/Vector_Search/vector_search.py
```

## 系统流程

1. **文档预处理** → 将各种格式文档转换为统一的文本格式
2. **文档切片** → 将长文档切分为适合向量化的小片段  
3. **向量化** → 使用AI模型将文本转换为数值向量
4. **索引构建** → 建立高效的向量索引结构
5. **状态跟踪** → 实时更新文档处理状态到数据库（0-未解析，1-已解析，2-已向量化）
6. **相似度搜索** → 根据查询找到最相关的文档内容

## 状态管理系统

系统实现了完整的文档处理状态跟踪：
- **状态码定义**：
  - 0：未解析 - 文档尚未开始处理
  - 1：已解析 - 文档已完成解析但未向量化
  - 2：已向量化 - 文档已完成向量化处理
- **唯一标识**：使用文件路径(file_paths)作为文档唯一标识
- **实时更新**：在解析和向量化完成后自动更新数据库状态

---

*本系统实现了企业文档的智能化管理和检索，支持自然语言查询，大幅提升信息获取效率。*